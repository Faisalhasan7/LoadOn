<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Downloader</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Use Inter font family */
        body {
            font-family: 'Inter', sans-serif;
        }

        /* Simple spinner animation */
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #09f;
            animation: spin 1s ease infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* Hide elements by default */
        .tab-content {
            display: none;
        }
    </style>
</head>

<body class="bg-gray-100 dark:bg-gray-900 flex md:items-center md:justify-center min-h-screen pt-8 md:pt-0">

    <div class="w-full max-w-md mx-auto p-4">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 md:p-8">
            <!-- Header Section -->
            <div class="text-center mb-6">
                <h1 class="text-2xl md:text-3xl font-bold text-gray-800 dark:text-white">Faisal's Personal Downloader</h1>
                <p class="text-gray-500 dark:text-gray-400 mt-2">Download videos and images from your favorite platforms.</p>
            </div>

            <!-- Tab Navigation -->
            <div class="mb-6">
                <div class="flex border-b border-gray-200 dark:border-gray-700">
                    <button id="tiktok-tab-btn" class="tab-btn flex-1 py-2 px-4 text-center font-semibold text-white bg-blue-600 rounded-t-lg focus:outline-none">TikTok</button>
                    <button id="vsco-tab-btn" class="tab-btn flex-1 py-2 px-4 text-center font-semibold text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg focus:outline-none">VSCO</button>
                </div>
            </div>

            <!-- TikTok Tab Content -->
            <div id="tiktok-tab-content" class="tab-content">
                <!-- Input and Button Section -->
                <div class="space-y-4">
                    <input type="url" id="tiktokUrl" placeholder="Paste TikTok video URL here..." class="w-full px-4 py-3 bg-gray-100 dark:bg-gray-700 border-2 border-transparent rounded-lg text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition">
                    <button id="tiktokDownloadBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                        </svg>
                        Download
                    </button>
                </div>
                <!-- Results, Loading, and Error Section -->
                <div id="tiktok-status" class="mt-6 text-center">
                    <div id="tiktok-loader" class="hidden spinner mx-auto"></div>
                    <p id="tiktok-error" class="text-red-500 font-medium hidden"></p>
                    <div id="tiktok-results" class="mt-4 space-y-3"></div>
                </div>
            </div>

            <!-- VSCO Tab Content -->
            <div id="vsco-tab-content" class="tab-content">
                <!-- Input and Button Section -->
                <div class="space-y-4">
                    <input type="url" id="vscoUrl" placeholder="Paste VSCO image/video URL here..." class="w-full px-4 py-3 bg-gray-100 dark:bg-gray-700 border-2 border-transparent rounded-lg text-gray-800 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition">
                    <button id="vscoDownloadBtn" class="w-full bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 flex items-center justify-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                        </svg>
                        Download
                    </button>
                </div>
                <!-- Status Section -->
                <div id="vsco-status" class="mt-6 text-center">
                    <p id="vsco-error" class="text-yellow-500 font-medium">VSCO downloading is not yet supported.</p>
                </div>
            </div>

            <!-- Footer -->
            <div class="text-center mt-8">
                <p class="text-xs text-gray-400 dark:text-gray-500">For personal use only.</p>
            </div>
        </div>
    </div>

    <script>
        // --- DOM Element References ---
        const tiktokTabBtn = document.getElementById('tiktok-tab-btn');
        const vscoTabBtn = document.getElementById('vsco-tab-btn');
        const tiktokTabContent = document.getElementById('tiktok-tab-content');
        const vscoTabContent = document.getElementById('vsco-tab-content');

        // TikTok elements
        const tiktokUrlInput = document.getElementById('tiktokUrl');
        const tiktokDownloadBtn = document.getElementById('tiktokDownloadBtn');
        const tiktokLoader = document.getElementById('tiktok-loader');
        const tiktokErrorEl = document.getElementById('tiktok-error');
        const tiktokResultsEl = document.getElementById('tiktok-results');

        // VSCO elements
        const vscoDownloadBtn = document.getElementById('vscoDownloadBtn');
        const vscoErrorEl = document.getElementById('vsco-error');

        // --- Tab Switching Logic ---
        function showTab(tabName) {
            // Hide all content
            tiktokTabContent.style.display = 'none';
            vscoTabContent.style.display = 'none';

            // Reset tab button styles
            tiktokTabBtn.className = 'tab-btn flex-1 py-2 px-4 text-center font-semibold text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg focus:outline-none';
            vscoTabBtn.className = 'tab-btn flex-1 py-2 px-4 text-center font-semibold text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg focus:outline-none';

            // Show selected tab and set active style
            if (tabName === 'tiktok') {
                tiktokTabContent.style.display = 'block';
                tiktokTabBtn.className = 'tab-btn flex-1 py-2 px-4 text-center font-semibold text-white bg-blue-600 rounded-t-lg focus:outline-none';
            } else if (tabName === 'vsco') {
                vscoTabContent.style.display = 'block';
                vscoTabBtn.className = 'tab-btn flex-1 py-2 px-4 text-center font-semibold text-white bg-purple-600 rounded-t-lg focus:outline-none';
            }
        }

        // Event Listeners for tabs
        tiktokTabBtn.addEventListener('click', () => showTab('tiktok'));
        vscoTabBtn.addEventListener('click', () => showTab('vsco'));

        // Show TikTok tab by default on page load
        document.addEventListener('DOMContentLoaded', () => {
            showTab('tiktok');
        });

        // --- TikTok Downloader Logic ---
        tiktokDownloadBtn.addEventListener('click', handleTikTokDownload);

        async function handleTikTokDownload() {
            const videoUrl = tiktokUrlInput.value.trim();
            // Clear previous results and errors
            tiktokResultsEl.innerHTML = '';
            tiktokErrorEl.classList.add('hidden');
            tiktokErrorEl.textContent = '';

            if (!videoUrl || !videoUrl.includes('tiktok.com')) {
                showError('tiktok', 'Please enter a valid TikTok video URL.');
                return;
            }

            // Show loader and disable button
            tiktokLoader.classList.remove('hidden');
            tiktokDownloadBtn.disabled = true;
            tiktokDownloadBtn.classList.add('opacity-50', 'cursor-not-allowed');

            try {
                const apiUrl = `https://www.tikwm.com/api/?url=${encodeURIComponent(videoUrl)}`;
                const response = await fetch(apiUrl);
                const data = await response.json();

                if (data.code === 0 && data.data) {
                    displayTikTokResults(data.data);
                } else {
                    showError('tiktok', data.msg || 'Could not fetch video. Please check the link.');
                }
            } catch (err) {
                console.error('Fetch Error:', err);
                showError('tiktok', 'An unexpected error occurred. Please try again later.');
            } finally {
                // Hide loader and re-enable button
                tiktokLoader.classList.add('hidden');
                tiktokDownloadBtn.disabled = false;
                tiktokDownloadBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        function displayTikTokResults(videoData) {
            tiktokResultsEl.innerHTML = '';
            if (videoData.play) {
                const noWatermarkLink = createDownloadLink(videoData.play, 'Download (No Watermark)');
                tiktokResultsEl.appendChild(noWatermarkLink);
            }
            if (videoData.wmplay) {
                const withWatermarkLink = createDownloadLink(videoData.wmplay, 'Download (With Watermark)');
                tiktokResultsEl.appendChild(withWatermarkLink);
            }
        }

        // --- VSCO Downloader Logic (Placeholder) ---
        vscoDownloadBtn.addEventListener('click', () => {
            // This is a placeholder. A real implementation would require a VSCO API.
            showError('vsco', 'VSCO downloading is not yet supported.');
        });


        // --- Helper Functions ---
        function createDownloadLink(url, text) {
            const link = document.createElement('a');
            link.href = url;
            link.textContent = text;
            link.setAttribute('download', '');
            link.setAttribute('target', '_blank');
            // Using hardcoded green color for reliability with Tailwind CDN
            link.className = `block w-full bg-green-500 hover:bg-green-600 text-white font-semibold py-2.5 px-4 rounded-lg transition duration-300 ease-in-out text-center`;
            return link;
        }

        function showError(platform, message) {
            if (platform === 'tiktok') {
                tiktokErrorEl.textContent = message;
                tiktokErrorEl.classList.remove('hidden');
            } else if (platform === 'vsco') {
                vscoErrorEl.textContent = message;
                vscoErrorEl.classList.remove('hidden');
            }
        }
    </script>
</body>

</html>